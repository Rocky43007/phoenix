# Project Phoenix - Setup Guide

## Repository Cleanup Summary

This repository has been configured to exclude generated files from version control.

### What's Excluded from Git

1. **Generated Native Projects** (`ios/` and `android/`)
   - These are generated by `expo prebuild`
   - Will be recreated when you clone the repo
   - Not committed to reduce repo size

2. **Build Artifacts**
   - `node_modules/`
   - `build/`, `dist/`
   - `.expo/`
   - Pod files, Gradle cache

3. **IDE & OS Files**
   - `.vscode/`, `.idea/`
   - `.DS_Store`

### What IS Committed

1. **Native Module Source Code**
   - `apps/*/native-modules/android/*.kt`
   - `apps/*/native-modules/ios/*.swift`
   - `apps/*/native-modules/ios/*.m`

2. **App Configuration**
   - `app.json` (Expo config)
   - `package.json`
   - Plugin files

3. **Source Code**
   - All TypeScript/JavaScript files
   - Shared packages

## First Time Setup (After Cloning)

```bash
# 1. Install dependencies
pnpm install

# 2. Generate native projects for emitter
cd apps/emitter
npx expo prebuild --clean
cd ../..

# 3. Generate native projects for receiver
cd apps/receiver
npx expo prebuild --clean
cd ../..

# 4. Run the apps
cd apps/emitter
pnpm ios      # or pnpm android

cd ../receiver
pnpm ios      # or pnpm android
```

## When to Run Prebuild Again

Run `npx expo prebuild --clean` when:
- You add a new native dependency
- You modify native module code
- You change app configuration (app.json)
- Build errors occur after pulling changes

## File Structure

```
phoenix/
├── .gitignore                    # Configured to exclude generated files
├── README.md                     # Main documentation
├── SETUP.md                      # This file
├── count-lines.sh               # Line counter script
├── apps/
│   ├── emitter/
│   │   ├── ios/                 # GENERATED - not in git
│   │   ├── android/             # GENERATED - not in git
│   │   ├── native-modules/      # COMMITTED - source code
│   │   ├── src/                 # COMMITTED - app code
│   │   ├── app.json             # COMMITTED - config
│   │   └── package.json         # COMMITTED - dependencies
│   └── receiver/
│       ├── ios/                 # GENERATED - not in git
│       ├── android/             # GENERATED - not in git
│       ├── native-modules/      # COMMITTED - source code
│       ├── src/                 # COMMITTED - app code
│       ├── app.json             # COMMITTED - config
│       └── package.json         # COMMITTED - dependencies
└── packages/                    # COMMITTED - all files
```

## Benefits

1. **Smaller Repository**: ~90% smaller without generated files
2. **Faster Clones**: Less data to download
3. **No Merge Conflicts**: Generated files won't cause conflicts
4. **Cleaner Diffs**: Only see actual code changes
5. **Platform Flexibility**: Each developer generates for their platform

## Verifying Setup

Check that generated folders are ignored:

```bash
# Should show ios/ and android/ as ignored
git status --ignored

# Should NOT show ios/ or android/ in untracked files
git status
```

## Troubleshooting

### "Can't find ViewManager" errors
- Run `npx expo prebuild --clean` in the app directory
- The native modules need to be regenerated

### Build fails after git pull
- Delete ios/ and android/ folders
- Run `npx expo prebuild --clean`
- Rebuild the app

### Changes to native modules not working
- Make sure you edited files in `native-modules/`, not `ios/` or `android/`
- Run `npx expo prebuild` to copy changes
- Rebuild the app

---

**Remember**: Never manually edit files in `ios/` or `android/` directories - they will be overwritten! Edit files in `native-modules/` instead.
